<channel version="4.5.2">
  <id>9f14bb6b-421d-4b2b-a36e-be77b3fa999d</id>
  <nextMetaDataId>2</nextMetaDataId>
  <name>0010 ORM Prueba de concepto</name>
  <description></description>
  <revision>1</revision>
  <sourceConnector version="4.5.2">
    <metaDataId>0</metaDataId>
    <name>sourceConnector</name>
    <properties class="com.mirth.connect.connectors.vm.VmReceiverProperties" version="4.5.2">
      <pluginProperties/>
      <sourceConnectorProperties version="4.5.2">
        <responseVariable>None</responseVariable>
        <respondAfterProcessing>true</respondAfterProcessing>
        <processBatch>false</processBatch>
        <firstResponse>false</firstResponse>
        <processingThreads>1</processingThreads>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
        <queueBufferSize>1000</queueBufferSize>
      </sourceConnectorProperties>
    </properties>
    <transformer version="4.5.2">
      <elements>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>prepara variables</name>
          <sequenceNumber>0</sequenceNumber>
          <enabled>false</enabled>
          <script>var msh = {
	sendingApplication: msg[&apos;MSH&apos;][&apos;MSH.3&apos;][&apos;MSH.3.1&apos;].toString().trim(),
	sendingFacility: msg[&apos;MSH&apos;][&apos;MSH.4&apos;][&apos;MSH.4.1&apos;].toString().trim(),
	receivingApplication: msg[&apos;MSH&apos;][&apos;MSH.5&apos;][&apos;MSH.5.1&apos;].toString().trim(),
	receivingFacility: msg[&apos;MSH&apos;][&apos;MSH.6&apos;][&apos;MSH.6.1&apos;].toString().trim(),
	dateTimeOfMessage: msg[&apos;MSH&apos;][&apos;MSH.7&apos;][&apos;MSH.7.1&apos;].toString().trim()
};

var pid = {
	idNumber: msg[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.1&apos;].toString().trim(),
	checkDigitScheme: msg[&apos;PID&apos;][&apos;PID.3&apos;][&apos;PID.3.4&apos;].toString().trim(),
	alternatePatientIdNumber: msg[&apos;PID&apos;][&apos;PID.4&apos;][&apos;PID.4.1&apos;].toString().trim(),
	alternatePatientIdType: msg[&apos;PID&apos;][&apos;PID.4&apos;][&apos;PID.4.4&apos;].toString().trim(),
	patientFamily: msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.1&apos;].toString().trim(),
	patientGiven : msg[&apos;PID&apos;][&apos;PID.5&apos;][&apos;PID.5.2&apos;].toString().trim(),
	patientMothersName : msg[&apos;PID&apos;][&apos;PID.6&apos;][&apos;PID.6.1&apos;].toString().trim(),
	birthday : msg[&apos;PID&apos;][&apos;PID.7&apos;][&apos;PID.7.1&apos;].toString().trim(),
	sex : convertGender(msg[&apos;PID&apos;][&apos;PID.8&apos;][&apos;PID.8.1&apos;].toString().trim()),
	addressStreet : msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.1&apos;].toString().trim(),
	addressOtherDesignation : msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.2&apos;].toString().trim(),
	addressCity : msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.3&apos;].toString().trim(),
	addressState : msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.4&apos;].toString().trim(),
	addressCountry : msg[&apos;PID&apos;][&apos;PID.11&apos;][&apos;PID.11.6&apos;].toString().trim(),
	addressCountryCode : msg[&apos;PID&apos;][&apos;PID.12&apos;][&apos;PID.12.1&apos;].toString().trim(),
	phoneNumberHome : msg[&apos;PID&apos;][&apos;PID.13&apos;][&apos;PID.13.1&apos;].toString().trim(),
	maritalStatus : msg[&apos;PID&apos;][&apos;PID.16&apos;][&apos;PID.16.1&apos;].toString().trim(),
	mail : msg[&apos;PID&apos;][&apos;PID.21&apos;][&apos;PID.21.1&apos;].toString().trim()
};

var evn = {};
var pv1 = {};
var orc = {};
var obr = {};
var dg1 = {};
var ais = {};


logger.info(&quot;msh=&quot; + JSON.stringify(msh));
logger.info(&quot;evn=&quot; + JSON.stringify(evn));
logger.info(&quot;pid=&quot; + JSON.stringify(pid));
logger.info(&quot;pv1=&quot; + JSON.stringify(pv1));



// Helpers
function convertGender(value) {
	switch (value) {
		case &quot;M&quot;: return &quot;male&quot;;
		case &quot;F&quot;: return &quot;female&quot;;
		}
	}

function convertMaritalStatus(value) {
	switch (value) {
			case &quot;M&quot;: return &quot;M&quot;;
			case &quot;B&quot;: return &quot;S&quot;
		}
	}</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>prepara recurso 1 (Patient)</name>
          <sequenceNumber>1</sequenceNumber>
          <enabled>false</enabled>
          <script>var patient = {
	resourceType: &quot;Patient&quot;,
	identifier: [{
			use: &quot;official&quot;,
			system: &quot;http://bupa.cl/pacientes&quot;,
			value: pid.idNumber
		}
	],
	active: true,
	name: [
		{
			use: &quot;official&quot;,
			family: pid.patientFamily,
			given: [ pid.patientGiven ],
			
    }
    ],
	gender: pid.sex,
	birthday: pid.birthday,
  	telecom: [
    		{
	     	system: &quot;phone&quot;,
	      	value: pid.phoneNumberHome,
	      	use: &quot;mobile&quot;,
	      	rank: 1
    		},
    		{
	     	system: &quot;mail&quot;,
	      	value: pid.mail,
	      	use: &quot;mail&quot;,
	      	rank: 1
    		}
	],
  	address: [
    	{
     	use: &quot;home&quot;,
      	line: [ pid.addressStreet + &quot; &quot; + pid.addressOtherDesignation ],
      	city: pid.addressCity,
      	country: pid.addressCountry
    	}
  	],
  	maritalStatus: {
    	coding: [
     	{
        		system: &quot;http://terminology.hl7.org/CodeSystem/v3-MaritalStatus&quot;,
        		code: pid.maritalStatus,
        		display: pid.maritalStatus
      	}
    	]
  	}
}


msg = patient;</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>prepara recurso 2 (DiagnosticReport)</name>
          <sequenceNumber>2</sequenceNumber>
          <enabled>false</enabled>
          <script>var diagnosticReport = {
	resourceType: &quot;DiagnosticReport&quot;,
	id: 123
	};</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>consolida recursos en Bundle</name>
          <sequenceNumber>3</sequenceNumber>
          <enabled>false</enabled>
          <script>var entry1 = {
	fullUrl: generateUUID(),
	resource: patient,
	request: { method: &quot;POST&quot;, url: &quot;Patient&quot; }
}

var entry2 = {
	fullUrl: generateUUID(),
	resource: diagnosticReport,
	request: { method: &quot;POST&quot;, url: &quot;DiagnosticReport&quot; }
}

var entries = [];
entries.push(entry1);
entries.push(entry2);

var bundle = {
	resourceType: &quot;Bundle&quot;,
	type: &quot;transaction&quot;,
	entry: entries
}


// Helpers 
function generateUUID() {
	return &quot;aaaa-bbbb-cccc-dddd&quot;
}

msg = entries;</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>ServiceRequest constructor</name>
          <sequenceNumber>4</sequenceNumber>
          <enabled>true</enabled>
          <script>var sourceObject = {
	status: &quot;hola&quot;
	};

var sr = new ServiceRequestResource(sourceObject)
  .setId(&quot;1&quot;)
  .setStatus(&quot;active&quot;)
  .setCategory(&quot;123&quot;,&quot;Consulta&quot;,&quot;http://category.cl&quot;)
  .setCode(&quot;456&quot;,&quot;Procedimiento&quot;,&quot;http://code.cl&quot;)
  .setSubject(&quot;Patient/123&quot;)
  .setEffectiveDateTime()
  .build();

logger.info(&quot;ServiceRequestJSON= &quot; + JSON.stringify(sr, null, 2));
channelMap.put(&quot;serviceRequest&quot;, sr);

//var sr3 = new ServiceRequestResource(obj2);

//sr3.setId(&quot;123&quot;);
//sr3.setStatus(&quot;kkkkk&quot;);

//logger.info(&quot;sr3=&quot; + JSON.stringify(sr3.build()));</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>Patient constructor</name>
          <sequenceNumber>5</sequenceNumber>
          <enabled>true</enabled>
          <script>var sourceObject = {
	active: true
	}

var patient = new PatientResource(sourceObject)
  .setId(&quot;123&quot;)
  .setActive(true)
  .addIdentifier(&quot;http://hospital.cl/mrn&quot;, &quot;MR&quot;, &quot;ABC-001&quot;)
  .addName(&quot;Pérez&quot;, [&quot;Juan&quot;], &quot;official&quot;)
  .setGender(&quot;male&quot;)
  .setBirthDate(&quot;1990-01-31&quot;)
  .addTelecom(&quot;phone&quot;, &quot;+56911112222&quot;, &quot;mobile&quot;, 1)
  .addAddress([&quot;Av. Siempre Viva 742&quot;], &quot;Santiago&quot;, &quot;RM&quot;, &quot;8320000&quot;, &quot;CL&quot;, &quot;home&quot;, &quot;both&quot;)
  .build();

logger.info(&quot;patientJSON=&quot; + JSON.stringify(patient, null, 2));
channelMap.put(&quot;patient&quot;, patient);</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>Condition constructor</name>
          <sequenceNumber>6</sequenceNumber>
          <enabled>true</enabled>
          <script>var sourceObject = {};

try {
	var condition = new ConditionResource(sourceObject)
	  .setId(&quot;cond-001&quot;)
	  .setClinicalStatus(&quot;active&quot;)
	  .setVerificationStatus(&quot;confirmed&quot;)
	  .setCategory(&quot;problem-list-item&quot;, &quot;Problem List&quot;)
	  .setCode(&quot;E11&quot;, &quot;Diabetes mellitus type 2&quot;, &quot;http://hl7.org/fhir/sid/icd-10&quot;)
	  .setSubject(&quot;Patient/123&quot;)
	  .setOnsetDate(&quot;2023-05-10&quot;)
	  .setRecorder(&quot;Practitioner/45&quot;)
	  .addNote(&quot;Paciente en control&quot;)
	  .build();
} 
catch (e) {
	logger.error(e);
}

logger.info(&quot;conditionJSON=&quot; + JSON.stringify(condition, null, 2));
channelMap.put(&quot;condition&quot;, condition);</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>Location constructor</name>
          <sequenceNumber>7</sequenceNumber>
          <enabled>true</enabled>
          <script>var sourceObject = {}

var location = new LocationResource(sourceObject)
  .setId(&quot;loc-1&quot;)
  .setStatus(&quot;active&quot;)
  .setName(&quot;Centro Médico ABC - Box 3&quot;)
  .setDescription(&quot;Box de medicina general&quot;)
  .setMode(&quot;instance&quot;)
  .setType(&quot;ro&quot;, &quot;Room&quot;, &quot;http://terminology.hl7.org/CodeSystem/location-physical-type&quot;) // o usa setPhysicalType
  .setPhysicalType(&quot;ro&quot;, &quot;Room&quot;, &quot;http://terminology.hl7.org/CodeSystem/location-physical-type&quot;)
  .setAddress([&quot;Av. Siempre Viva 742&quot;], &quot;Santiago&quot;, &quot;RM&quot;, &quot;8320000&quot;, &quot;CL&quot;)
  .setPosition(-33.4489, -70.6693, 560)
  .setManagingOrganization(&quot;Organization/1&quot;)
  .addTelecom(&quot;phone&quot;, &quot;+56 2 2345 6789&quot;, &quot;work&quot;, 1)
  .build();

logger.info(&quot;locationJSON=&quot; + JSON.stringify(location, null, 2));
channelMap.put(&quot;location&quot;, location);</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>Practitioner constructor</name>
          <sequenceNumber>8</sequenceNumber>
          <enabled>true</enabled>
          <script>var sourceObject = {};

var practitioner = new PractitionerResource(sourceObject)
  .setId(&quot;prac-1&quot;)
  .setActive(true)
  .addIdentifier(&quot;http://minsal.cl/rnpi&quot;, &quot;MD&quot;, &quot;123456&quot;)
  .addName(&quot;Pérez&quot;, [&quot;Ana&quot;, &quot;María&quot;], &quot;official&quot;, [&quot;Dra.&quot;])
  .setGender(&quot;female&quot;)
  .setBirthDate(&quot;1985-04-10&quot;)
  .addTelecom(&quot;phone&quot;, &quot;+56911112222&quot;, &quot;mobile&quot;, 1)
  .addAddress([&quot;Calle 123&quot;], &quot;Santiago&quot;, &quot;RM&quot;, &quot;8320000&quot;, &quot;CL&quot;, &quot;work&quot;, &quot;both&quot;)
  .addQualification(&quot;MD&quot;, &quot;Médico Cirujano&quot;, &quot;http://terminology.hl7.org/CodeSystem/v2-0360&quot;)
  .addCommunication(&quot;es&quot;, &quot;Spanish&quot;)
  .build();

logger.info(&quot;practitionerJson=&quot; + JSON.stringify(practitioner, null, 2));
channelMap.put(&quot;practitioner&quot;, practitioner);</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>AllergyIntolerance constructor</name>
          <sequenceNumber>9</sequenceNumber>
          <enabled>true</enabled>
          <script>var sourceObject = {};

var alg = new AllergyIntoleranceResource(sourceObject)
  .setId(&quot;alg-1&quot;)
  .setClinicalStatus(&quot;active&quot;)
  .setVerificationStatus(&quot;confirmed&quot;)
  .setType(&quot;allergy&quot;)
  .setCategory([&quot;medication&quot;])
  .setCriticality(&quot;high&quot;)
  .setCode(&quot;7982&quot;, &quot;Penicillin&quot;, &quot;http://snomed.info/sct&quot;)
  .setPatient(&quot;Patient/123&quot;)
  .setRecordedDate(&quot;2026-01-17T12:00:00-03:00&quot;)
  .addReaction(&quot;247472004&quot;, &quot;Hives&quot;, &quot;http://snomed.info/sct&quot;, &quot;moderate&quot;, &quot;Urticaria posterior a exposición&quot;)
  .addNote(&quot;Reportado por paciente&quot;)
  .build();

logger.info(&quot;allergyJson=&quot; + JSON.stringify(alg, null, 2));
channelMap.put(&quot;allergy&quot;, alg);</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="4.5.2">
          <name>Bundle constructor</name>
          <sequenceNumber>10</sequenceNumber>
          <enabled>true</enabled>
          <script>var bundle = new BundleResource()
  //.setTimestamp(DateUtil.formatDate(new Date(), &quot;yyyy-MM-dd&apos;T&apos;HH:mm:ssXXX&quot;))
  .setTimestamp(&apos;2026-01-17&apos;)
  .addUpdate($(&apos;serviceRequest&apos;))
  .addUpdate($(&apos;patient&apos;)) // PUT Patient/123
  .addUpdate($(&apos;condition&apos;))    // PUT Condition/cond-001
  .addUpdate($(&apos;location&apos;))     // PUT Location/loc-1
  .addUpdate($(&apos;practitioner&apos;))
  .addUpdate($(&apos;allergy&apos;))
  .build();

logger.info(&quot;bundleJson=&quot; + JSON.stringify(bundle, null, 2));
channelMap.put(&quot;bundleJson&quot;, JSON.stringify(bundle));</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
      </elements>
      <inboundTemplate encoding="base64">TVNIfF5+JnxISVNfQ0JTVHxISVNfQ0JTVF9JTlRFUkZBQ0V8Q1NIX1JJU3xDU0hfUklTX0lOVEVSRkFDRXwyMDEzMDcwMTE4NTU1NXx8T1JNXk8wMXx8RHwyLjF8fEFMfE5FfHx8CQpQSUR8fHwwMDE5MTQwNjQzXl5eQ0JTVHwyODk4MzQyNC05Xl5eUlVUfEhlcm5hbmRleiAuXk1pZ3VlbHx8MTk0NjEyMTJ8TXx8fExvcyBBbGVyY2VzXkxvcyBBbHBlc15TQU5USUFHT14xM15eQ2hpbGV8Q2hpbGV8OTk5OTk5OTk5fHx8MXx8fHx8Q09SUkVPQEJVUEEuQ0x8fHx8fENMfHwJClBWMXx8SXxDQlNSMDJQMl5SRUNFUCBDT05TVUxUQSBQSVNPIDJeXnx8fHw3MTk0OTMxLTFeU09GRklBIENPTlRSRVJBU15KVUFOIFBBQkxPfHx8Q0JTfHx8fHwwMDF8fHx8MDAyOTcxMTkyMnwwNDkwNDQwOTA1fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHwyMDI1MTIyNAkKT1JDfE5XfDAxMDIwMjQzODleQ0JTRUNPVHx8XkVDT1RPTU9HUkFGSUF8fHxeXl5eMDAxfENRVUlOQU5BT0d8fDcxOTQ5MzEtMV5TT0ZGSUEgQ09OVFJFUkFTXkpVQU4gUEFCTE9eNzE5NDkzMS0xfHx8fHwyMDI1MTIyNDEwMDU0MHx8Q0JTTVE1MUhefHx8fAkKT0JSfDA0OTA0NDA5MDV8Q0JTUlAxUDF8fFI0MDRQQkxeRUNPVE9NT0dSQUbDjUEgUEFSVEVTIEJMQU5EQVMgXnwyMDI1MTIyNHwJCkRHMXx8ICB8MDAwMDAwMDAwMDAwMDB8fF58Xnx8fHx8fHwJCkFJU3x8fHx8fHx8fF58fAk=</inboundTemplate>
      <outboundTemplate encoding="base64"></outboundTemplate>
      <inboundDataType>HL7V2</inboundDataType>
      <outboundDataType>JSON</outboundDataType>
      <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="4.5.2">
        <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="4.5.2">
          <handleRepetitions>true</handleRepetitions>
          <handleSubcomponents>true</handleSubcomponents>
          <useStrictParser>false</useStrictParser>
          <useStrictValidation>false</useStrictValidation>
          <stripNamespaces>false</stripNamespaces>
          <segmentDelimiter>\r</segmentDelimiter>
          <convertLineBreaks>true</convertLineBreaks>
        </serializationProperties>
        <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="4.5.2">
          <useStrictParser>false</useStrictParser>
          <useStrictValidation>false</useStrictValidation>
          <segmentDelimiter>\r</segmentDelimiter>
        </deserializationProperties>
        <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="4.5.2">
          <splitType>MSH_Segment</splitType>
          <batchScript></batchScript>
        </batchProperties>
        <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="4.5.2">
          <segmentDelimiter>\r</segmentDelimiter>
          <successfulACKCode>AA</successfulACKCode>
          <successfulACKMessage></successfulACKMessage>
          <errorACKCode>AE</errorACKCode>
          <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
          <rejectedACKCode>AR</rejectedACKCode>
          <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
          <msh15ACKAccept>false</msh15ACKAccept>
          <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
        </responseGenerationProperties>
        <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="4.5.2">
          <successfulACKCode>AA,CA</successfulACKCode>
          <errorACKCode>AE,CE</errorACKCode>
          <rejectedACKCode>AR,CR</rejectedACKCode>
          <validateMessageControlId>true</validateMessageControlId>
          <originalMessageControlId>Destination_Encoded</originalMessageControlId>
          <originalIdMapVariable></originalIdMapVariable>
        </responseValidationProperties>
      </inboundProperties>
      <outboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="4.5.2">
        <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="4.5.2">
          <splitType>JavaScript</splitType>
          <batchScript></batchScript>
        </batchProperties>
      </outboundProperties>
    </transformer>
    <filter version="4.5.2">
      <elements/>
    </filter>
    <transportName>Channel Reader</transportName>
    <mode>SOURCE</mode>
    <enabled>true</enabled>
    <waitForPrevious>true</waitForPrevious>
  </sourceConnector>
  <destinationConnectors>
    <connector version="4.5.2">
      <metaDataId>1</metaDataId>
      <name>Destination 1</name>
      <properties class="com.mirth.connect.connectors.js.JavaScriptDispatcherProperties" version="4.5.2">
        <pluginProperties/>
        <destinationConnectorProperties version="4.5.2">
          <queueEnabled>false</queueEnabled>
          <sendFirst>false</sendFirst>
          <retryIntervalMillis>10000</retryIntervalMillis>
          <regenerateTemplate>false</regenerateTemplate>
          <retryCount>0</retryCount>
          <rotate>false</rotate>
          <includeFilterTransformer>false</includeFilterTransformer>
          <threadCount>1</threadCount>
          <threadAssignmentVariable></threadAssignmentVariable>
          <validateResponse>false</validateResponse>
          <resourceIds class="linked-hash-map">
            <entry>
              <string>Default Resource</string>
              <string>[Default Resource]</string>
            </entry>
          </resourceIds>
          <queueBufferSize>1000</queueBufferSize>
          <reattachAttachments>true</reattachAttachments>
        </destinationConnectorProperties>
        <script>//logger.info(connectorMessage.getEncodedData());</script>
      </properties>
      <transformer version="4.5.2">
        <elements/>
        <inboundDataType>JSON</inboundDataType>
        <outboundDataType>JSON</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="4.5.2">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="4.5.2">
            <splitType>JavaScript</splitType>
            <batchScript></batchScript>
          </batchProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="4.5.2">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="4.5.2">
            <splitType>JavaScript</splitType>
            <batchScript></batchScript>
          </batchProperties>
        </outboundProperties>
      </transformer>
      <responseTransformer version="4.5.2">
        <elements/>
        <inboundDataType>JSON</inboundDataType>
        <outboundDataType>JSON</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="4.5.2">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="4.5.2">
            <splitType>JavaScript</splitType>
            <batchScript></batchScript>
          </batchProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="4.5.2">
          <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="4.5.2">
            <splitType>JavaScript</splitType>
            <batchScript></batchScript>
          </batchProperties>
        </outboundProperties>
      </responseTransformer>
      <filter version="4.5.2">
        <elements/>
      </filter>
      <transportName>JavaScript Writer</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
      <waitForPrevious>true</waitForPrevious>
    </connector>
  </destinationConnectors>
  <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
  <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
  <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
  <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
  <properties version="4.5.2">
    <clearGlobalChannelMap>true</clearGlobalChannelMap>
    <messageStorageMode>DEVELOPMENT</messageStorageMode>
    <encryptData>false</encryptData>
    <encryptAttachments>false</encryptAttachments>
    <encryptCustomMetaData>false</encryptCustomMetaData>
    <removeContentOnCompletion>false</removeContentOnCompletion>
    <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
    <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
    <initialState>STARTED</initialState>
    <storeAttachments>false</storeAttachments>
    <metaDataColumns/>
    <attachmentProperties version="4.5.2">
      <type>None</type>
      <properties/>
    </attachmentProperties>
    <resourceIds class="linked-hash-map">
      <entry>
        <string>Default Resource</string>
        <string>[Default Resource]</string>
      </entry>
    </resourceIds>
  </properties>
  <exportData>
    <metadata>
      <enabled>true</enabled>
      <lastModified>
        <time>1768650855478</time>
        <timezone>America/Santiago</timezone>
      </lastModified>
      <pruningSettings>
        <pruneMetaDataDays>11</pruneMetaDataDays>
        <pruneContentDays>1</pruneContentDays>
        <archiveEnabled>true</archiveEnabled>
        <pruneErroredMessages>false</pruneErroredMessages>
      </pruningSettings>
      <userId>1</userId>
    </metadata>
  </exportData>
</channel>